# プロンプト生成・改善ツール

## 概要
このドキュメントでは、Claudeが提供する2つの強力なプロンプト支援ツールについて解説します。

- **Prompt Generator（プロンプト生成ツール）**: タスクの説明から高品質なプロンプトテンプレートを自動生成
- **Prompt Improver（プロンプト改善ツール）**: 既存のプロンプトを分析・強化し、より堅牢で効果的なプロンプトに改善

これらのツールは、プロンプトエンジニアリングのベストプラクティスを自動的に適用し、初心者から上級者まで、すべてのユーザーがより良いプロンプトを作成できるよう支援します。

## 目次
- [Prompt Generator（プロンプト生成ツール）](#prompt-generatorプロンプト生成ツール)
- [Prompt Improver（プロンプト改善ツール）](#prompt-improverプロンプト改善ツール)
- [まとめ](#まとめ)
- [参考リンク](#参考リンク)

---

## Prompt Generator（プロンプト生成ツール）

### 説明
Prompt Generatorは、タスクの説明を入力するだけで、Claude用の高品質なプロンプトテンプレートを自動生成するツールです。プロンプトエンジニアリングのベストプラクティスに従ったテンプレートを作成し、全てのClaudeモデル（拡張思考機能を持つモデルを含む）に対応しています。

### なぜ使うのか
**主なメリット:**
- **「白紙ページ問題」の解決**: 何から始めればいいかわからない状態を解消
- **ベストプラクティスの自動適用**: プロンプトエンジニアリングの知識がなくても高品質なプロンプトを生成
- **時間の節約**: 手動でプロンプトを作成する時間を大幅に削減
- **学習リソース**: 生成されたプロンプトから効果的なプロンプトの書き方を学べる

**最適なユースケース:**
- プロンプト作成の初期段階でのたたき台生成
- さらなるテストと反復改善のための出発点として活用
- プロンプトの書き方に迷った時の参考資料として

### 使い方

**方法1: Claude Consoleで使用**
1. [Claude Console](https://console.anthropic.com/dashboard)にアクセス
2. Prompt Generatorツールを選択
3. 実現したいタスクを説明する
4. 生成されたプロンプトテンプレートを取得

**方法2: Google Colabノートブックで使用**
1. [Google Colabノートブック](https://anthropic.com/metaprompt-notebook/)にアクセス
2. Anthropic API keyを準備（[Settings](https://console.anthropic.com/settings/keys)から取得）
3. ノートブックのコードを実行
4. タスクを指定してプロンプトを生成

### 具体例

**入力例（タスクの説明）:**
```
顧客のメールに対して、親切で専門的なトーンで返信を生成するプロンプトを作成してください。
返信には、顧客の懸念への対処、解決策の提案、追加サポートの提供を含める必要があります。
```

**生成されるプロンプトの特徴:**
- 明確な役割定義（ロールプロンプティング）
- XMLタグを使った構造化
- 具体的な出力フォーマット指定
- タスクの各ステップの明示的な指示

### ポイント・注意事項

**ベストプラクティス:**
- **第一稿として扱う**: 生成されたプロンプトは出発点であり、さらなる改善とテストが推奨されます
- **タスクを明確に説明**: より詳細なタスク説明を提供するほど、より適切なプロンプトが生成されます
- **反復改善**: 生成されたプロンプトを実際に使用し、必要に応じて調整を行いましょう

**注意点:**
- 生成されたプロンプトは完璧ではない可能性があります
- 特定のユースケースに合わせたカスタマイズが必要な場合があります
- 拡張思考モデル用には専用のプロンプティングTipsを参照してください

---

## Prompt Improver（プロンプト改善ツール）

### 説明
Prompt Improverは、既存のプロンプトを自動的に分析・強化し、より堅牢で効果的なプロンプトに改善するツールです。特に、高精度が要求される複雑なタスク向けにプロンプトを最適化することに優れています。

### なぜ使うのか

**主なメリット:**
- **精度の向上**: 詳細な推論指示により、Claudeの応答品質が向上
- **構造化の改善**: XMLタグを使った明確な構造により、プロンプトが読みやすく管理しやすくなる
- **思考連鎖の追加**: ステップバイステップの推論プロセスをガイド
- **例の強化**: 既存の例を改善し、より効果的な学習を実現

**最適な使用場面:**
- 詳細な推論が必要な複雑なタスク
- スピードよりも正確性が重要な状況
- Claudeの現在の出力に大幅な改善が必要な問題

**避けるべき場面:**
- レイテンシやコストに敏感なアプリケーション（改善されたプロンプトはより長く、詳細だが遅い応答を生成するため）

### 使い方

**事前準備:**
1. **改善したいプロンプトテンプレート**（必須）
2. **現在の出力に関する問題点のフィードバック**（任意だが推奨）
   - 例: 「要約が専門家向けには基本的すぎる」
3. **入力例と理想的な出力例**（任意だが推奨）

**実行手順:**
1. プロンプトテンプレートを送信
2. Claudeの現在の出力に関する問題点を追加
3. 入力例と理想的な出力例を含める
4. 改善されたプロンプトをレビュー
5. 必要に応じてさらに調整

### 4ステップの改善プロセス

Prompt Improverは以下の4つのステップでプロンプトを改善します:

**1. Example identification（例の識別）**
- プロンプトテンプレートから既存の例を特定・抽出
- 例のパターンと構造を分析

**2. Initial draft（初期草稿）**
- 明確なセクションとXMLタグを持つ構造化されたテンプレートを作成
- プロンプトの各部分を論理的に整理

**3. Chain of thought refinement（思考連鎖の洗練）**
- 詳細な推論指示を追加・改善
- ステップバイステップの思考プロセスをガイド

**4. Example enhancement（例の強化）**
- 新しい推論プロセスを示すように例を更新
- より効果的な学習例に変換

### 生成されるテンプレートの特徴

改善されたプロンプトには以下の要素が含まれます:

- **詳細な思考連鎖（Chain-of-Thought）指示**: Claudeの推論プロセスをガイド
- **XMLタグによる明確な構造化**: コンテンツを整理し、読みやすさを向上
- **標準化された例フォーマット**: 入力から出力までの段階的な推論を示す
- **戦略的なプレフィル**: Claudeの初期応答をガイドする

### 具体例

**改善前のプロンプト:**
```
顧客のメールを分析して、センチメント（ポジティブ、ネガティブ、ニュートラル）を判定してください。

メール: {{EMAIL_CONTENT}}
```

**改善後のプロンプトの特徴:**
```xml
<task_description>
顧客のメールを分析し、センチメントを判定します。
</task_description>

<analysis_steps>
1. メールの全体的なトーンを評価
2. 感情を示す具体的な単語やフレーズを特定
3. 文脈を考慮してセンチメントを判定
4. 判定の根拠を明確に説明
</analysis_steps>

<email>
{{EMAIL_CONTENT}}
</email>

<output_format>
センチメント: [ポジティブ/ネガティブ/ニュートラル]
根拠: [判定の理由を2-3文で説明]
</output_format>
```

**改善点:**
- 明確な段階的推論指示を追加
- XMLタグでコンテンツを構造化
- 明示的な出力フォーマット要件を提供
- 分析プロセスを通じてClaudeをガイド

### ポイント・注意事項

**一般的な問題と解決策:**

**問題1: 例が出力に表示されない**
- **解決策**: XMLタグで適切にフォーマットされているか確認
- 例は最初のユーザーメッセージの先頭に配置されているか確認

**問題2: 思考連鎖が冗長すぎる**
- **解決策**: 望ましい出力の長さと詳細レベルについて具体的な指示を追加
- 例: 「各ステップは1-2文で簡潔に説明してください」

**問題3: 推論ステップが要件に合わない**
- **解決策**: 特定のユースケースに合わせてステップセクションを修正
- 不要なステップを削除し、重要なステップを追加

**テストケース生成との連携:**
例がまだない場合は、Test Case Generatorを使用して:
1. サンプル入力を生成
2. Claudeの応答を取得
3. 応答を編集して理想的な出力に合わせる
4. 洗練された例をプロンプトに追加

### ベストプラクティス

**効果的な使用方法:**
- **具体的なフィードバックを提供**: 現在の出力の何が問題なのかを明確に説明
- **質の高い例を用意**: 理想的な入力と出力の例を複数用意
- **段階的に改善**: 一度に全てを改善しようとせず、段階的にテストと調整を行う
- **パフォーマンスをモニター**: 改善前後の出力品質を比較評価

**注意点:**
- 改善されたプロンプトは長くなり、トークン使用量が増加する可能性があります
- 応答時間が長くなる可能性があるため、レイテンシ要件を考慮してください
- コスト対効果を検討し、必要に応じて簡略化を検討してください

---

## まとめ

### Prompt Generator vs Prompt Improver

| 特徴 | Prompt Generator | Prompt Improver |
|------|------------------|-----------------|
| **用途** | 新規プロンプトの作成 | 既存プロンプトの改善 |
| **入力** | タスクの説明 | 既存プロンプト + フィードバック |
| **出力** | 基本的なプロンプトテンプレート | 詳細で構造化されたプロンプト |
| **最適な場面** | プロンプト作成の初期段階 | 精度向上が必要な場面 |
| **複雑さ** | シンプル | より詳細で複雑 |

### 推奨ワークフロー

1. **Prompt Generatorで開始**: タスクの説明から初期プロンプトを生成
2. **テストと評価**: 生成されたプロンプトを実際のユースケースでテスト
3. **Prompt Improverで改善**: 問題点を特定し、プロンプトを改善
4. **反復**: 必要に応じて手動調整とテストを繰り返す
5. **本番環境へ展開**: 十分にテストされたプロンプトを実装

### 重要なポイント

- **これらのツールは出発点**: 生成・改善されたプロンプトは完璧ではありません
- **継続的な改善**: 実際の使用を通じてプロンプトを調整し続けることが重要
- **コストとパフォーマンスのバランス**: 詳細なプロンプトは精度を向上させますが、コストと時間も増加します
- **ユースケースに応じた選択**: タスクの要件に応じて適切なツールとアプローチを選択

---

## 参考リンク

### ツールへのアクセス
- [Claude Console](https://console.anthropic.com/dashboard): Prompt GeneratorとPrompt Improverに直接アクセス
- [Google Colabノートブック（Prompt Generator）](https://anthropic.com/metaprompt-notebook/): コードベースでプロンプトを生成
- [API Keys設定](https://console.anthropic.com/settings/keys): API keyの取得

### 関連ドキュメント
- [プロンプトテンプレートと変数](https://platform.claude.com/docs/en/build-with-claude/prompt-engineering/prompt-templates-and-variables)
- [拡張思考（Extended Thinking）](https://platform.claude.com/docs/en/build-with-claude/extended-thinking)
- [Evaluation Tool](https://platform.claude.com/docs/en/test-and-evaluate/eval-tool): テストケース生成とプロンプト評価
- [プロンプトライブラリ](https://platform.claude.com/docs/en/resources/prompt-library/library): 様々なタスク向けのプロンプト例

### チュートリアルとリソース
- [GitHubプロンプティングチュートリアル](https://github.com/anthropics/prompt-eng-interactive-tutorial): インタラクティブな学習
- [Google Sheetsプロンプティングチュートリアル](https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8): 実践的な演習
- [Anthropic Cookbook](https://github.com/anthropics/anthropic-cookbook): コードサンプルとベストプラクティス
